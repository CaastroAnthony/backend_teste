<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Resumo</title>
  <link rel="stylesheet" href="../styles/style.css">
  <style>
    main { max-width: 1000px; margin: 40px auto; padding: 0 20px; }
    .breadcrumb { color: #d1d1e0; margin-bottom: 20px; font-size: 14px; }
    .breadcrumb a { color: #a855f7; text-decoration: none; }
    .breadcrumb a:hover { text-decoration: underline; }
    h1 { font-size: 32px; color: #a855f7; margin-bottom: 10px; }
    h2 { font-size: 22px; color: #fff; margin-top: 28px; margin-bottom: 8px; }
    p, li { color: #e8e8ff; line-height: 1.8; font-size: 16px; }
    .section { background: rgba(0,0,0,0.4); border-radius: 16px; padding: 22px; box-shadow: 0 0 20px rgba(168,85,247,0.35); margin-top: 18px; }
    ul { padding-left: 18px; }
    .actions { display:flex; gap:10px; margin-top:20px; }
    .muted { color:#c8c8dd; font-size: 14px; }
  </style>
</head>
<body>
  <header>
    <div id="title"><h1>EstudoTech</h1></div>
    <nav>
      <ul>
        <li><a href="../dashboard.html">Dashboard</a></li>
        <li><a href="#" id="logout">Sair</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <div class="breadcrumb"><a href="../dashboard.html">Dashboard</a> / <span id="bcSubject"></span> / <span id="bcLesson"></span></div>
    <h1 id="pageTitle">Resumo</h1>
    <div class="muted" id="subtitle"></div>
    <div id="content"></div>
    <div class="actions">
      <a class="btn" id="backBtn" href="../dashboard.html">Voltar ao Dashboard</a>
    </div>
  </main>

  <script>
    function unslugify(s){
      return s.replace(/-/g,' ').replace(/\b\w/g, c => c.toUpperCase());
    }
    function getParams(){
      const u = new URL(window.location.href);
      return { subject: (u.searchParams.get('subject')||'').toLowerCase(), lesson: (u.searchParams.get('lesson')||'').toLowerCase() };
    }
    const summaries = {
      'front-end': {
        'html': {
          title: 'HTML',
          sections: [
            { h: 'O que é HTML', t: 'HTML (HyperText Markup Language) é a linguagem de marcação que define a estrutura do conteúdo na web. Com HTML descrevemos elementos como títulos, parágrafos, links, imagens, listas e formulários. Cada elemento é representado por tags que informam ao navegador como interpretar o conteúdo.' },
            { h: 'Estrutura básica', t: 'Um documento HTML inicia com <!DOCTYPE html>, seguido pelo elemento raiz <html>. Dentro dele há <head>, onde ficam metadados (título, charset, links de estilo), e <body>, que contém o conteúdo visível (títulos, parágrafos, imagens etc.).' },
            { h: 'Elementos e atributos', t: 'Elementos como <h1> a <h6> representam títulos; <p> é parágrafo; <a> cria links; <img> exibe imagens; <ul>/<ol>/<li> criam listas; <div> e <span> organizam layout. Atributos (como href, src, alt, title, id, class) complementam os elementos com informações adicionais.' },
            { h: 'Semântica e acessibilidade', t: 'Tags semânticas como <header>, <nav>, <main>, <section>, <article>, <aside> e <footer> conferem significado ao layout, melhorando SEO e acessibilidade. Texto alternativo em imagens (atributo alt) e uso correto de cabeçalhos ajudam leitores de tela e motores de busca.' },
            { h: 'Boas práticas', t: 'Organize o documento com hierarquia de títulos, utilize semântica apropriada, mantenha atributos relevantes, valide o HTML e separe estrutura (HTML), estilo (CSS) e comportamento (JS).' }
          ]
        },
        'css': {
          title: 'CSS',
          sections: [
            { h: 'Função do CSS', t: 'CSS (Cascading Style Sheets) controla a apresentação visual do HTML: cores, tipografia, espaçamentos, layout e responsividade. O “cascading” define como regras são aplicadas e sobrescritas conforme especificidade e ordem.' },
            { h: 'Seletores e especificidade', t: 'Seletores como de tag, classe (.classe), id (#id), atributos e pseudo-classes (:hover, :focus) atingem elementos. Especificidade e ordem de carregamento determinam qual regra prevalece. Evite !important e prefira hierarquias claras.' },
            { h: 'Layout moderno', t: 'Flexbox e CSS Grid facilitam a criação de layouts responsivos. Flexbox é ótimo para linhas/colunas e alinhamento; Grid para estruturas bidimensionais complexas. Combine media queries para adaptar a diferentes telas.' },
            { h: 'Performance e boas práticas', t: 'Reutilize classes, evite seletores excessivamente específicos, minimize repetições, prefira variáveis (custom properties) quando possível e padronize espaçamentos e tipografia.' },
            { h: 'Animações e transições', t: 'Transições tornam interações mais fluidas; animações com @keyframes adicionam movimento. Use com parcimônia e preserve acessibilidade e desempenho.' }
          ]
        },
        'javascript': {
          title: 'JavaScript',
          sections: [
            { h: 'Papel do JavaScript', t: 'JavaScript adiciona comportamento dinâmico às páginas: manipulação do DOM, eventos, requisições assíncronas (fetch/AJAX), armazenamento local e muito mais.' },
            { h: 'Fundamentos', t: 'Tipos, variáveis (let/const), funções, escopo, objetos, arrays, operadores, condicionais e laços. Entender o modelo de execução, call stack e event loop é essencial para lidar com assíncrono.' },
            { h: 'DOM e eventos', t: 'Selecionar elementos (querySelector), alterar conteúdo/atributos/estilos, criar/remover nós e escutar eventos (click, input, submit). Delegação de eventos melhora performance em listas grandes.' },
            { h: 'Módulos e organização', t: 'Use módulos ES para separar responsabilidades. Prefira funções puras quando possível, teste unidades críticas e trate erros com try/catch ou fluxos de promessa bem estruturados.' },
            { h: 'Boas práticas', t: 'Evite variáveis globais, documente contratos (tipos/formatos), valide entradas e padronize formatação. Utilize ferramentas de build/lint quando aplicável.' }
          ]
        },
        'react': {
          title: 'React',
          sections: [
            { h: 'Conceito', t: 'React é uma biblioteca para construir interfaces com componentes reutilizáveis e um fluxo de dados unidirecional. O estado define o que é renderizado e a UI se atualiza de forma declarativa.' },
            { h: 'Componentes e props', t: 'Componentes recebem props (dados imutáveis) e podem manter estado interno. Componentes funcionais e hooks simplificam lógica e efeitos colaterais.' },
            { h: 'Estado e hooks', t: 'useState gerencia estado local; useEffect lida com efeitos; useMemo/useCallback otimizam renderização; useContext compartilha dados globais; hooks personalizados abstraem lógica reutilizável.' },
            { h: 'Renderização e performance', t: 'Chaves estáveis em listas, divisão de código, memoização e evitar re-renderizações desnecessárias melhoram performance. Ferramentas de DevTools auxiliam na análise.' },
            { h: 'Arquitetura e testes', t: 'Organize pastas por domínio/feature, componha componentes, defina contratos claros e crie testes de unidade/integração para fluxos críticos.' }
          ]
        },
        'responsividade': {
          title: 'Responsividade',
          sections: [
            { h: 'Princípios', t: 'Criar interfaces que se adaptam a diferentes larguras e densidades de tela. Grid fluido, imagens responsivas e breakpoints significativos são a base.' },
            { h: 'Media queries', t: 'Ajuste layout e tipografia em pontos de quebra. Evite infinitos breakpoints; foque em necessidades reais do conteúdo.' },
            { h: 'Layout e densidade', t: 'Use Flexbox/Grid, unidades relativas (rem, %) e minmax. Garanta áreas de toque adequadas e contraste elevando a usabilidade.' },
            { h: 'Performance', t: 'Evite carregamentos desnecessários em telas pequenas, priorize conteúdo e aplique lazy loading para mídia pesada.' },
            { h: 'Acessibilidade móvel', t: 'Considere zoom, navegação por toque e preferências do usuário (como motion-reduce).'}
          ]
        }
      },
      'back-end': {
        'node-js': {
          title: 'Node.js',
          sections: [
            { h: 'Plataforma', t: 'Node.js é um runtime JavaScript baseado no V8 que permite construir servidores e ferramentas. Modelo não bloqueante e orientado a eventos torna I/O eficiente.' },
            { h: 'Módulos e pacotes', t: 'Gerencie dependências com npm/yarn. Estruture projetos por responsabilidade, use scripts úteis e controle versões com package.json.' },
            { h: 'APIs e HTTP', t: 'Crie servidores, manipule rotas, cabeçalhos e status. Implemente middlewares e trate erros de forma centralizada.' },
            { h: 'Assíncrono', t: 'Promessas e async/await simplificam fluxos. Lide com exceções assíncronas e evite callback hell.' },
            { h: 'Observabilidade', t: 'Logs estruturados, métricas e rastreamento facilitam depuração e monitoramento em produção.' }
          ]
        },
        'express-js': {
          title: 'Express.js',
          sections: [
            { h: 'Roteamento', t: 'Defina rotas com métodos HTTP e separação por módulos/routers. Middlewares processam requisições antes de chegar ao handler final.' },
            { h: 'Validação', t: 'Valide entradas (schema validation) para garantir integridade e segurança. Padronize respostas e códigos de status.' },
            { h: 'Erros e segurança', t: 'Mantenha um middleware de erro. Aplique CORS conforme necessário, limitação de taxa, helmet e saneamento de entradas.' },
            { h: 'Estrutura e organização', t: 'MVC ou camadas (controllers, services, repositories). Variáveis de ambiente para segredos e configuração por ambiente.' },
            { h: 'Testes', t: 'Teste handlers e integrações usando ferramentas apropriadas, isolando dependências e usando bancos temporários quando preciso.' }
          ]
        },
        'autenticacao': {
          title: 'Autenticação',
          sections: [
            { h: 'Conceitos', t: 'Autenticação verifica identidade; autorização controla permissões. Mantenha senhas com hash/salt e políticas de expiração.' },
            { h: 'JWT e sessões', t: 'JWT armazena claims e é útil para APIs stateless; sessões com cookies são simples para apps web. Proteja tokens, defina expiração e rotação.' },
            { h: 'Proteção de rotas', t: 'Exija credenciais, verifique escopos/roles e registre auditoria. Evite vazamento de informações em mensagens de erro.' },
            { h: 'Boas práticas', t: 'TLS sempre, rate limiting, monitoramento de tentativas, MFA quando aplicável e revisão de dependências.' },
            { h: 'Privacidade', t: 'Colete o mínimo necessário, cumpra LGPD/GDPR e forneça controles ao usuário.' }
          ]
        },
        'banco-de-dados': {
          title: 'Banco de Dados',
          sections: [
            { h: 'Conceitos', t: 'Diferença entre bancos relacionais e não relacionais, consistência e disponibilidade. Escolha conforme requisitos.' },
            { h: 'Conexão e CRUD', t: 'Gerencie pools de conexão, consultas parametrizadas, transações e mapeamento objeto-relacional quando necessário.' },
            { h: 'Migrações', t: 'Controle versão do esquema com migrações e aplique versionamento em ambientes múltiplos (dev/homolog/prod).' },
            { h: 'Segurança', t: 'Controle de acesso granular, princípio do menor privilégio, criptografia em repouso e em trânsito.' },
            { h: 'Performance', t: 'Índices, análise de planos de execução, cache e monitoramento de métricas.' }
          ]
        }
      },
      'mobile': {
        'flutter': {
          title: 'Flutter',
          sections: [
            { h: 'O que é', t: 'Flutter é um framework da Google para criar apps nativos multiplataforma (iOS, Android, Web, Desktop) usando Dart e widgets declarativos.' },
            { h: 'Para que serve', t: 'Permitir alto desempenho e experiência nativa com um único codebase, reduzindo custo e tempo de desenvolvimento.' },
            { h: 'Como usar', t: 'Instale o SDK do Flutter, crie um projeto com flutter create e construa interfaces com widgets combináveis.' },
            { h: 'Passo a passo', t: 'Configure o ambiente, rode flutter doctor, crie o projeto, use Hot Reload para iterar rapidamente.' },
            { h: 'Boas práticas', t: 'Estruture pastas por features, use gerenciadores de estado (Provider/Bloc), componha widgets pequenos e reaproveitáveis.' }
          ]
        },
        'react-native': {
          title: 'React Native',
          sections: [
            { h: 'O que é', t: 'Framework do ecossistema React para construir apps nativos usando JavaScript/TypeScript e componentes nativos.' },
            { h: 'Para que serve', t: 'Criar apps iOS/Android com compartilhamento de lógica e UI, aproveitando o conhecimento de React.' },
            { h: 'Como usar', t: 'Inicie com Expo ou React Native CLI, componha interfaces com View/Text/Button e estilize com StyleSheet.' },
            { h: 'Passo a passo', t: 'Crie o projeto, execute no simulador/dispositivo, integre libs (navegação, HTTP), produza builds para stores.' },
            { h: 'Boas práticas', t: 'Evite re-renderizações, use FlatList com keys estáveis, use TypeScript e organize navegação por stacks/tabs.' }
          ]
        },
        'kotlin-android': {
          title: 'Kotlin (Android)',
          sections: [
            { h: 'O que é', t: 'Kotlin é a linguagem moderna oficial para Android, concisa e segura (null-safety), integrando-se ao ecossistema Jetpack.' },
            { h: 'Para que serve', t: 'Criar apps Android nativos com alta performance e acesso total a APIs de plataforma.' },
            { h: 'Como usar', t: 'Use Android Studio, Gradle e bibliotecas Jetpack (ViewModel, LiveData, Navigation) ou Compose para UI declarativa.' },
            { h: 'Passo a passo', t: 'Crie o projeto, modele camadas (data/domain/ui), implemente navegação, persista dados (Room) e publique na Play Store.' },
            { h: 'Boas práticas', t: 'Arquitetura MVVM/Clean, coroutines/Flow para assíncrono, injeção de dependência (Hilt) e testes instrumentados.' }
          ]
        },
        'swift-ios': {
          title: 'Swift (iOS)',
          sections: [
            { h: 'O que é', t: 'Swift é a linguagem moderna da Apple para iOS/macOS/watchOS/tvOS, segura e performática.' },
            { h: 'Para que serve', t: 'Desenvolver apps iOS nativos com UIKit ou SwiftUI, integrando recursos de plataforma (câmera, sensores, etc.).' },
            { h: 'Como usar', t: 'Use Xcode, crie um projeto SwiftUI/UIKit, componha telas, gerencie estado e navegação.' },
            { h: 'Passo a passo', t: 'Defina alvos e capabilities, crie views, conecte serviços, configure provisionamento e gere builds para TestFlight/App Store.' },
            { h: 'Boas práticas', t: 'Adote SwiftUI para UIs reativas, use Combine/async-await, separe camadas e escreva testes de UI (XCTest/XCUITest).' }
          ]
        }
      },
      'modelagem-de-banco-de-dados': {
        'modelagem-relacional': {
          title: 'Modelagem Relacional',
          sections: [
            { h: 'Fundamentos', t: 'A modelagem relacional define entidades, atributos e relacionamentos com base em requisitos de negócio. A partir do modelo conceitual, evolui-se para o lógico e físico.' },
            { h: 'Chaves e relacionamentos', t: 'Chaves primárias identificam unicamente registros; chaves estrangeiras conectam tabelas. Relações 1:1, 1:N e N:N são mapeadas conforme cardinalidades e regras.' },
            { h: 'Integridade', t: 'Integridade referencial, de domínio e de entidade asseguram consistência dos dados. Restrições e triggers podem reforçar regras.' },
            { h: 'Mapeamento', t: 'Transforme entidades/atributos em tabelas/colunas, resolvendo relacionamentos N:N com tabelas associativas. Documente regras e convenções.' },
            { h: 'Boas práticas', t: 'Nomes claros, tipos adequados, padrões de nomenclatura e documentação do dicionário de dados.' }
          ]
        },
        'diagramas': {
          title: 'Diagramas',
          sections: [
            { h: 'ER e UML', t: 'Diagramas Entidade-Relacionamento representam entidades, atributos e relacionamentos. Diagramas UML (classe) podem auxiliar em visões diferentes do domínio.' },
            { h: 'Leitura e notações', t: 'Notações como Crow’s Foot e Chen descrevem cardinalidades e chaves. Padronize notação para facilitar comunicação.' },
            { h: 'Ferramentas', t: 'Ferramentas como Draw.io, Lucidchart, dbdiagram.io e ferramentas nativas dos SGBDs aceleram criação e manutenção.' },
            { h: 'Evolução', t: 'Mantenha diagramas alinhados ao esquema e versionados junto ao código. Atualize quando requisitos mudarem.' },
            { h: 'Dicas', t: 'Evite poluição visual, organize por módulos e destaque relacionamentos críticos.' }
          ]
        },
        'normalizacao': {
          title: 'Normalização',
          sections: [
            { h: 'Objetivo', t: 'A normalização minimiza redundâncias e anomalias de inserção/atualização/remoção por meio de formas normais.' },
            { h: '1FN, 2FN, 3FN', t: '1FN: eliminar grupos repetidos e valores múltiplos; 2FN: remover dependências parciais em chaves compostas; 3FN: remover dependências transitivas.' },
            { h: 'BCNF e além', t: 'A Boyce-Codd Normal Form reforça restrições sobre determinantes. Formas superiores abordam casos específicos, mas aumentam complexidade.' },
            { h: 'Trade-offs', t: 'Em cenários de leitura intensa, às vezes a desnormalização controlada melhora desempenho, mas exige disciplina e processos para manter consistência.' },
            { h: 'Prática', t: 'Analise dependências funcionais, aplique formas normais progressivamente e valide com dados e consultas reais.' }
          ]
        },
        'indices-e-desempenho': {
          title: 'Índices e Desempenho',
          sections: [
            { h: 'Índices', t: 'Índices aceleram buscas ao custo de espaço e manutenção em escritas. Escolha colunas seletivas e monitore impacto em INSERT/UPDATE/DELETE.' },
            { h: 'Planos de execução', t: 'Analise EXPLAIN/EXPLAIN ANALYZE para entender varreduras, junções e uso de índices. Ajuste consultas e índices conforme padrões de acesso.' },
            { h: 'Otimizações', t: 'Use índices compostos com ordem adequada, evite funções em colunas indexadas em filtros e considere particionamento para grandes volumes.' },
            { h: 'Cache e conexões', t: 'Aproveite caches de aplicação/BD, ajuste pools de conexão e limpe gargalos de rede/IO. Monitore em produção.' },
            { h: 'Observabilidade', t: 'Métricas de latência, throughput, taxas de acerto de cache e locking ajudam a orientar otimizações contínuas.' }
          ]
        }
      }
    };

    const { subject, lesson } = getParams();
    const subjectMap = summaries[subject] || {};
    const data = subjectMap[lesson];
    const bcSubject = document.getElementById('bcSubject');
    const bcLesson = document.getElementById('bcLesson');
    const titleEl = document.getElementById('pageTitle');
    const subtitleEl = document.getElementById('subtitle');
    const contentEl = document.getElementById('content');

    if(!data){
      const s = unslugify(subject || 'Assunto');
      const l = unslugify(lesson || 'Lição');
      bcSubject.textContent = s;
      bcLesson.textContent = l;
      titleEl.textContent = 'Resumo não encontrado';
      subtitleEl.textContent = 'Não há conteúdo cadastrado para esta combinação de assunto e lição.';
    } else {
      const s = unslugify(subject);
      const l = data.title;
      bcSubject.textContent = s;
      bcLesson.textContent = l;
      titleEl.textContent = l;
      subtitleEl.textContent = 'Assunto: ' + s;
      data.sections.forEach(sec => {
        const wrap = document.createElement('section');
        wrap.className = 'section';
        const h = document.createElement('h2');
        h.textContent = sec.h;
        const p = document.createElement('p');
        p.textContent = sec.t;
        wrap.appendChild(h);
        wrap.appendChild(p);
        contentEl.appendChild(wrap);
      });
    }

    function goBack(){
      if(document.referrer && window.history.length > 1){
        window.history.back();
      } else {
        window.location.href = '../dashboard.html';
      }
    }

    const logout = document.getElementById('logout');
    if(logout){
      logout.addEventListener('click', function(e){
        e.preventDefault();
        localStorage.removeItem('usuario');
        window.location.href = '../login.html';
      });
    }
    const backBtn = document.getElementById('backBtn');
    if(backBtn){
      backBtn.addEventListener('click', function(e){
        e.preventDefault();
        goBack();
      });
    }
  </script>
</body>
</html>
